{"version":3,"file":"markdownItTitle.modern.js","sources":["../index.js"],"sourcesContent":["\n\n\n\nexport default function plugin(md, options) {\n  const level = ('level' in (options || {})) ? options.level : 1;\n  const originalHeadingOpen = md.renderer.rules.heading_open;\n\n  md.renderer.rules.heading_open = function heading_open(tokens, idx, opts, env, self) {\n    if (!env.title && (level < 1 || tokens[idx].tag === `h${level}`)) {\n      env.title = tokens[idx + 1].children\n        .filter(t => t.type === 'text' || t.type === 'code_inline')\n        // do NOT select 'html_inline' as that node type will only carry the HTML open & close tags, *without* the innerText!\n        .reduce((acc, t) => acc + t.content, '');\n    }\n\n    // Execute original rule.\n    if (originalHeadingOpen) {\n      return originalHeadingOpen.call(this, tokens, idx, opts, env, self);\n    }\n    return self.renderToken(tokens, idx, opts, env, self);\n  };\n}\n"],"names":["plugin","md","options","level","originalHeadingOpen","renderer","rules","heading_open","tokens","idx","opts","env","self","title","tag","children","filter","t","type","reduce","acc","content","call","renderToken"],"mappings":"AAIe,SAASA,MAAT,CAAgBC,EAAhB,EAAoBC,OAApB,EAA6B;AAC1C,QAAMC,KAAK,GAAI,YAAYD,OAAO,IAAI,EAAvB,CAAD,GAA+BA,OAAO,CAACC,KAAvC,GAA+C,CAA7D;AACA,QAAMC,mBAAmB,GAAGH,EAAE,CAACI,QAAH,CAAYC,KAAZ,CAAkBC,YAA9C;;AAEAN,EAAAA,EAAE,CAACI,QAAH,CAAYC,KAAZ,CAAkBC,YAAlB,GAAiC,SAASA,YAAT,CAAsBC,MAAtB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyCC,GAAzC,EAA8CC,IAA9C,EAAoD;AACnF,QAAI,CAACD,GAAG,CAACE,KAAL,KAAeV,KAAK,GAAG,CAAR,IAAaK,MAAM,CAACC,GAAD,CAAN,CAAYK,GAAZ,KAAqB,IAAGX,KAAM,EAA1D,CAAJ,EAAkE;AAChEQ,MAAAA,GAAG,CAACE,KAAJ,GAAYL,MAAM,CAACC,GAAG,GAAG,CAAP,CAAN,CAAgBM,QAAhB,CACTC,MADS,CACFC,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW,MAAX,IAAqBD,CAAC,CAACC,IAAF,KAAW,aADnC;AAAA,OAGTC,MAHS,CAGF,CAACC,GAAD,EAAMH,CAAN,KAAYG,GAAG,GAAGH,CAAC,CAACI,OAHlB,EAG2B,EAH3B,CAAZ;AAID,KANkF;;;AASnF,QAAIjB,mBAAJ,EAAyB;AACvB,aAAOA,mBAAmB,CAACkB,IAApB,CAAyB,IAAzB,EAA+Bd,MAA/B,EAAuCC,GAAvC,EAA4CC,IAA5C,EAAkDC,GAAlD,EAAuDC,IAAvD,CAAP;AACD;;AACD,WAAOA,IAAI,CAACW,WAAL,CAAiBf,MAAjB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCC,GAApC,EAAyCC,IAAzC,CAAP;AACD,GAbD;AAcD;;;;"}